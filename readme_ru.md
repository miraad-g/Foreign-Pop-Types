# Foreign Pop Types
Мод для Europa Universalis V, добавляющий новые типы работников для всех иностранных зданий представленных в игре.

[![Steam Workshop](https://img.shields.io/badge/Steam%20Workshop-Subscribe-blue)](https://steamcommunity.com/sharedfiles/filedetails/?id=3642467898)

## Обзор
На данный момент (1.0.10) в игре существует баг, который не позволяет строить иностранных зданий в тех локациях, где уже имеется население той же религии и культуры.
Что не менее важно, если в локации слишком много населения одного типа, но разных культур\религий, игра автоматически соединяет меньшую группу к большей. Это приводит к тому, что при строительстве, например, торгового офиса, есть риск, что все бюргеры этой локации начнут считаться как и ваши бюргеры. То же самое и для других типов иностранных зданий. Это **значительно** влияет на силу сословий, в экстремальных случаях создавая ситуации, когда в вашей стране больше чужого населения, чем собственного. Данное поведение было отмечено Paradox как [WAD](https://forum.paradoxplaza.com/forum/threads/foreign-pops-counted-as-my-own-population-in-foreign-locations-where-i-built-a-trade-office.1873234/), с чем я категорически не согласен.

Данный мод решает обе эти проблемы.

## Нововведение
* Добавлено 6 типов иностранных попов, аналогичных всем существующим, кроме племен и рабов. Все они ничем не отличаются от стандартных и оказывают на локацию\страну такое же влияние, как и обычные. К ним применяются те же модификаторы.
* Тип работников у всех иностранных зданий заменен на иностранный аналог.
* Немного переработан интерфейс карточек, фильтрующих здания по типам работников. По умолчанию отображение карточек иностранных типов отключено, чтобы не загромождать интерфейс. Переключить вид можно щелкнув правой кнопкой мыши по любой из карточек.

![Cards demonstartion](https://i.ibb.co/sds3w5Ht/image.png)

## Принцип работы исправлений
* Так как работники иностранных зданий теперь другого типа, можно построить здания в локациях с той же культурой и религией. Игра проверяет только идентичные типы населения, поэтому конфликта не возникает.
* Иностранный тип населения не будет объединяться с обычным типом, что решает проблему "захвата" чужого населения. Тем не менее, они по-прежнему считаются частью как вашей страны, так и страны, где построено здание. Я понимаю это как WAD, т.к. теперь не происходит объединения чрезмерно больших групп, что уводит силу ваших сословий за границы разумного. В остальном кажется правильным, что работники проживающие за границей оказывают влияние на обе страны.

## Локализация
Мод доступен на следующих языках:
* English
* Русский
* Português

На остальных языках, доступных в игре, мод отображается на английском языке без плейсхолдеров. В моде не так много нового текста, а все тултипы аналогичны ванильным.

## Совместимость
* Не совместимо с Ironman.
* Полностью совместимо с текущими сохранениями.
* _Должно быть_ совместимо с любыми модами. Ни один ванильный файл не был перезаписан, все изменения применяются к уже существующим объектам. Убедитесь, что данный мод загружается последним, чтобы изменения вступили в силу.
* Незначительно модифицирует GUI (переключаемо), однако перезапись не повлияет на работоспособность мода.

## Известные проблемы
* Проблема со строительством иностранных зданий в локациях с той же культурой и религией может появиться снова, если другая страна построит там иностранное здание раньше. На данный момент я разрабатываю другой мод, обходящий конкретно эту проблему (почти завершено).
* Одинаковые иностранные группы населения всё еще объединяются при достижении лимита в локации (4 – для одинаковой религии и 8 – для разных), однако это не вызывает такие столь больших проблем, т.к. их количество относительно общего числа невелико. Это можно исправить, изменив значения лимитов в 00_defines.txt. Однако вполне вероятно, это окажет существенное влияние на производительность, особенно на поздних этапах игры.
* Иностранные типы населения появляются с нулевой грамотностью. Это известный баг, касающихся всех типов населения. Ждем пока Paradox исправит это.

## Уcтановка
Подпишитесь на мод в [Steam Workshop](https://steamcommunity.com/sharedfiles/filedetails/?id=3642467898).

### Ручная установка
* Скачайте этот репозиторий.
* Скопируйте содержимое в Documents\Paradox Interactive\Europa Universalis V\mod.
* Включите в игре, как и обычно.

#### Отдельная благодарность Conner, который вдохновил меня на этот мод. Загляните в его [моды](https://steamcommunity.com/workshop/filedetails/?id=3619138120) тоже, они крутые.